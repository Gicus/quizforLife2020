<div class="container" style="margin-top: 70px;">
  <div class="row">
    <div class="col-sm-8 offset-sm-2">
      <div *ngIf="!testIsCreated">
        <div>
          <h2 class="text-center">Creeaza-ti propriul test</h2>
        </div>
        <h4>Pasul 1</h4>
        <div><small> Pe rand, poti adauga oricate intrebari doresti, completand campurile obligatorii marcate cu
          *.</small></div>
        <div><small> Dupa ce apesi butonul <b>"Adauga intrebarea curenta"</b>, intrebarea curenta este salvata si se
          poate completa
          intrebarea urmatoare.</small></div>
        <form #questionForm="ngForm" class="mt-3">
          <div class="form-group">
            <label for="question" class="font-weight-bold">Intrebarea {{question.currentNumber}}*</label>
            <textarea [(ngModel)]="question.text" type="text" name="question" class="form-control" id="question"
                      aria-describedby="intrebareaHelp"
                      placeholder="Adauga intrebarea" required minlength="3">
            </textarea>
          </div>
          <div class="mt-5"></div>
          <div class="form-group">
            <label for="response-a">Raspunsul A*</label>
            <input [(ngModel)]="question?.answers[0].value" class="form-control" id="response-a" name="response-a"
                   type="text"
                   required
                   aria-describedby="responseAHelp" placeholder="Raspunsul A">
          </div>
          <div class="form-group">
            <label for="response-b">Raspunsul B*</label>
            <input [(ngModel)]="question?.answers[1].value" class="form-control" id="response-b" name="response-b"
                   type="text"
                   required
                   aria-describedby="responseBHelp" placeholder="Raspunsul B">
          </div>
          <div class="form-group">
            <label for="response-c">Raspunsul C</label>
            <input [(ngModel)]="question?.answers[2].value" class="form-control" id="response-c" name="response-c"
                   type="text"
                   aria-describedby="responseCHelp" placeholder="Raspunsul C">
          </div>
          <div class="form-group">
            <label for="response-d">Raspunsul D</label>
            <input [(ngModel)]="question?.answers[3].value" class="form-control" id="response-d" name="response-d"
                   type="text"
                   aria-describedby="responseDHelp" placeholder="Raspunsul D">
          </div>
          <div class="form-group">
            <label for="response-e">Raspunsul E</label>
            <input [(ngModel)]="question?.answers[4].value" class="form-control" id="response-e" name="response-e"
                   type="text"
                   aria-describedby="responseEHelp" placeholder="Raspunsul E">
          </div>
          <div class="mt-5"></div>
          <div class="form-group">
            <label for="right-answer">Raspunsul corect*</label>
            <select class="form-control" id="right-answer"
                    required
                    [(ngModel)]="question.rightAnswer" name="rightAnswer">
              <ng-container *ngFor="let rightAnswer of rightAnswers, let i = index">
                <option *ngIf="question.answers[i].value!==''" [value]="rightAnswer">{{rightAnswer}}</option>
              </ng-container>
            </select>
          </div>
          <div class="form-group">
            <label for="value">Punctaj intrebare (recomandat de la 1 la 100)*</label>
            <input [(ngModel)]="question.value" type="number" name="value" class="form-control" id="value" min="1"
                   max="10" maxLength="2" required
                   aria-describedby="valueHelp" placeholder="Punctaj intrebare">
          </div>
          <div class="mt-5"></div>
          <div class="form-group">
            <label for="link-youtube-question">Link YOUTUBE video</label>
            <input [(ngModel)]="question.youtubeVideoLink" aria-describedby="linkResponseHelp" class="form-control"
                   id="link-youtube-question"
                   name="link-youtube"
                   placeholder="Link Youtube" type="text">
          </div>
          <div class="mt-5"></div>
          <div class="text-center">
            <button class="btn btn-secondary" [disabled]="questionForm.invalid" (click)="addCurrentQuestion()">Adauga
              intrebarea curenta
            </button>
          </div>
        </form>
        <div class="mt-5"></div>
        <h4>Pasul 2</h4>
        <div><small> Dupa ce ai adaugat intrebarile dorite, completeaza urmatoarele 3 campuri. Test ID si Data expirarii
          testului sunt obligatorii.</small></div>
        <div><small> <b>Link YOUTUBE video test</b> - reprezinta linkul spre un video ce va fi afisat in test.
        </small></div>
        <div><small> <b>Test ID</b> - reprezinta id-ul de identificare in viitor a testului.
        </small></div>
        <div><small><b>Data expirarii testului</b>
          - reprezinta data pana la care testul se poate completa.</small></div>
        <form #testForm="ngForm" class="mt-3">
          <div class="form-group">
            <label for="link-youtube-test">Link YOUTUBE video</label>
            <input [(ngModel)]="test.youtubeVideoLink" aria-describedby="linkResponseHelp" class="form-control" id="link-youtube-test"
                   name="link-youtube"
                   placeholder="Link Youtube" type="text">
          </div>
          <div class="form-group">
            <label for="test-id">Test ID*</label>
            <input (ngModelChange)="test.id=$event" [ngModel]="test.id | singleString" aria-describedby="testIdHelp"
                   class="form-control" id="test-id"
                   name="test-id"
                   placeholder="ID de identificare a testului" required
                   type="text">
            <small *ngIf="!isUniqueTestId()">Id-ul ales nu este unic. Te rugam alege altul</small>
          </div>
          <div class="form-group">
            <label for="test-due-date">Data expirarii testului*</label>
            <div class="input-group">
              <input id="test-due-date" class="form-control" placeholder="yyyy-mm-dd" required
                     name="due-date" [(ngModel)]="test.dueDate" ngbDatepicker #d="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"></button>
              </div>
            </div>
          </div>
          <div class="text-center mt-5">
            <button (click)="createTest()"
                    [disabled]="testForm.invalid || test.questions.length === 0 || !isUniqueTestId()"
                    class="btn btn-primary">Publica testul
            </button>
          </div>
        </form>
        <div class="mb-5"></div>
      </div>
      <div *ngIf="testIsCreated">
        <div class="text-center">
          <h2>Testul avand ID-ul {{test.id}} a fost creat cu success</h2>
          <button class="btn btn-primary mt-5" [disabled]="!test.id" (click)="goToTest()">Acceseaza test
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
